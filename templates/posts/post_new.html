{% extends '_base.html' %}

{% load crispy_forms_tags %}

{% block content %}



<form>
    <div id="forms">
        {% csrf_token %}
        {{ form | crispy}}
        
    </div>
    <button id="add-another">add another</button>
    <input type="submit" />
</form>


<script>
let form_count = Number($("[name=extra_field_count]").val());
// get extra form count so we know what index to use for the next item.
//
$("#add-another").click(function() {
    form_count ++;

    let element = $('<input type="text"/>');
    element.attr('name', 'extra_field_' + form_count);
    $("#forms").append(element);
    // build element and append it to our forms container

    $("[name=extra_field_count]").val(form_count);
    // increment form count so our view knows to populate 
    // that many fields for validation
})
</script>
{% endblock content %}